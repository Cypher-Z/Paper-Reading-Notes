##  Outside the ClosedWorld: On UsingMachine Learning For Network Intrusion Detection S&P' 10

*修改自2018年春季学期《计算机网络安全技术》课程作业

### 文章概述

安全领域，特别是入侵检测方面，围绕机器学习的研究已经开展多年。然而，真正取得突出效果、且可应用于实际网络环境的研究成果却寥寥无几。入侵检测领域的研究方法的独特性，是导致该问题的主要原因。即，于“网络中寻找攻击”这一任务与其它机器学习常见的应用领域的任务有着本质的区别。

本文的两位作者，Robin Sommer与Vern Paxson都是来自伯克利的安全科学家，其主导开发的开源项目Bro是目前部署最广泛的实时网络入侵检测系统之一。两位作者结合自身丰富的研究经验，从网络入侵检测领域的本质出发，阐述了机器学习在该领域面临的特殊挑战，解释了机器学习方法应用性较弱的根本原因。不过，即使发展遇到一定问题，作者认为，机器学习仍可在入侵检测领域发挥一定作用，并提供一些指导意见。



### 机器学习在入侵检测领域面临的困难

针对“异常的检测“本身并非机器学习难以解决的问题，例如，信用卡的支付模式异常监控，就可通过机器学习方法进行有效应用。然而，在数据结构性、语义清晰度等方面，入侵检测所需要处理的数据将更为复杂。具体而言，挑战包括：

1. **问题本质存在区别**。传统机器学习更擅长找到”相似的“数据，是一种分类模型。然而，入侵检测需要发现的，是”未出现过“的异常行为，不可能存在训练数据。
2. **误报代价过高**。机器学习难免会产生误报，对于其它领域而言也许问题不大。如OCR识别可以通过人工进行校对、刊错。然而，在网络入侵检测领域，人工校对的成本非常昂贵。针对假阳性的结果，安全人员将在案例分析上耗费大量精力；针对假阴性的结果，也就是漏报，一个漏掉的攻击可能就对整个网络环境产生致命的打击。
3. **语义差异性**。安全管理人员需要根据入侵检测系统的输出采取相应的措施。而一般的机器学习模型仅能汇报异常，对为何发生异常、攻击原理、如何防御等问题很难给出可解释性的、易于理解的输出。
4. **网络系统的复杂性**。真实世界中的网络环境是非常复杂的，流量会因种种事件展现出较高的不稳定行。对于入侵检测系统而言，如何排除由于网络复杂结构本身引起的异常波动，是亟需解决的问题。
5. **评价体系构建的困难**。
   1. 缺少标注/标准数据集。尤其是异常攻击流量数据，是很难获取的。
   2. 语义差异性。评价系统表现时，或许应将“用户友好”纳入考虑。即，不仅观察入侵检测系统是否探测出异常，还需要关心安全管理者是否能够根据输出内容快速找到问题的解决方案。
   3. 对抗性。安全研究领域的一个独有特征在于其对抗性，即，攻击者和防御者始终出于博弈之中。这要求入侵检测模型具有较好的鲁棒性，不能被攻击者轻易绕过。



### 将机器学习应用于入侵检测领域的指导建议

为帮助安全社区利用机器学习在入侵检测领域的作用，作者提出如下建议：

1. 充分理解威胁模型。包括网络环境、漏报的风险、数据、绕过的可能性等，以寻找最好的应用方案。
2. 尽量缩小研究问题的范围。机器学习的核心本质是分类，研究问题范围越小，分类的范围越狭窄，效果可能也就会越好。此外，安全研究的核心还是安全问题（威胁攻击），要从问题出发，寻找能解决问题的机器学习方法，而不是抱着“一定要用机器学习方法”的决心，尝试去找对应的安全问题。这完全是本末倒置的做法。
3. 降低犯错代价。包括寻找稳定的特征、根据其他附加信息对于结果进行二次验证等。
4. 评价体系的构建。
   1. 数据集的构建。最好来自真实的大规模网络。若考虑到隐私或道德原因，可以让学生以实习生的身份、在机构内部完成实验。
   2. 注重结果的可解释性。漏报、误报的原因。



### My Comment

1. 这篇文章读起来令我十分感同身受，虽然可能连安全研究的入门者都谈不上，但在我以前所参与的课题、项目中，的确踩了很多作者提到的坑，有过很多困惑。十分感谢Robin和Vern，有时这种看似“务虚”的问题分析和经验分享，比一两个漏洞发现和检测的具体方法对我们的帮助和启发要实际地多。

2. 同时，这篇文章也带给了我很多思考。根据他们给出的建议所获得的研究上的具体指导启发这里就不谈了。更重要的是，他们从入侵检测问题的本质特性出发，对机器学习在其研究与应用中的挑战进行了系统深入的分析，从根本上解决了我之前拘泥于一些具体问题而产生的困惑。科研过程中，不能总是陷身于一些技术细节、具体问题的解决，应该学会从一两个具体问题中抽离出来，从更宏观的、根本性的角度来看问题。与此同时，不能忽略的是，这种思考绝不是拍脑袋就能总结出来的，其背后是作者们深厚的专业知识基础和扎实的研究工作经验。
3. 凡是涉及与机器学习相关的项目开展、论文写作时，都可以回过头来翻翻这篇文章。无论是对梳理研究思路、还是写出更全面的paper、给出更solid的研究结果，都是非常值得借鉴的。



